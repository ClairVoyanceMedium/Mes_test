<!DOCTYPE html>
<html lang="fr" class="no-js" prefix="og: http://ogp.me/ns#">
<head>
  <!-- Script anti-clickjacking sécurisé -->
  <script nonce="xai-48273">
    if (window.top !== window.self) {
      window.top.location = window.self.location;
      console.warn("Tentative de clickjacking bloquée.");
    }
  </script>

  <!-- Métadonnées optimisées pour mobile, SEO et assistants vocaux -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="last-modified" content="2025-02-25">
  <title>Libérez votre âme des envoûtements avec le rituel de désenvoûtement et protection rapide, reconnu à distance</title>
  <meta name="description" content="Brisez les chaînes invisibles des envoûtements maléfiques grâce à notre rituel de désenvoûtement puissant et protection rapide, conçu par Frederick du Cabinet ClairvoyanceMedium.com. Purifiez votre esprit, retrouvez la lumière de la chance et érigez une forteresse spirituelle durable pour un renouveau profond et équilibré.">
  <meta name="keywords" content="désenvoûtement à distance ultra puissant, rituel de désenvoûtement rapide et efficace, symptômes d’envoûtement maléfique à détecter, protection spirituelle contre sorts noirs, comment briser une malédiction à distance, meilleur désenvoûteur mondial à ce jour, purification énergétique mobile puissante, voyance par email pour sortilèges, rituel protection énergies négatives, signes de sortilège à distance, exorcisme, solution contre malédictions ancestrales, guide désenvoûtement spirituel complet">
  <meta name="author" content="Frederick du Cabinet ClairvoyanceMedium.com">
  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow">
  <meta name="AI-friendly-content" content="true">
  <meta name="speakable" content="https://clairvoyancemedium.github.io/Rituel-desenvoutement-et-protection-rapide.github.io/#faq" aria-label="Contenu lisible par les assistants vocaux">
  <meta name="voice-search-enabled" content="true">
  <meta name="searchgpt" content="index, follow, AI-friendly">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Libérez Votre Âme avec le Rituel de Désenvoûtement et Protection Rapide N°1 Mondial">
  <meta name="twitter:description" content="Frederick du Cabinet ClairvoyanceMedium.com dévoile le rituel de désenvoûtement et protection rapide le plus puissant au monde. Brisez les sorts et vivez librement dès aujourd’hui, partout sur Terre.">
  <meta name="twitter:image" content="https://i.imgur.com/GmyGlKk.webp">
  <meta name="twitter:site" content="@CabinetVoyance_">
  <meta name="twitter:creator" content="@CabinetVoyance_">

  <!-- Open Graph -->
  <meta property="og:title" content="Libérez Votre Âme des Envoûtements avec le Rituel de Désenvoûtement et Protection Rapide le Plus Puissant au Monde">
  <meta property="og:description" content="Brisez les chaînes invisibles des envoûtements maléfiques avec le rituel de désenvoûtement et protection rapide le plus puissant au monde, conçu par Frederick du Cabinet ClairvoyanceMedium.com. Purifiez votre esprit, retrouvez la lumière de la chance et érigez une forteresse spirituelle durable, où que vous soyez sur Terre.">
  <meta property="og:image" content="https://i.imgur.com/GmyGlKk.webp">
  <meta property="og:url" content="https://clairvoyancemedium.github.io/Rituel-desenvoutement-et-protection-rapide.github.io/">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="fr_FR">
  <meta property="og:site_name" content="ClairvoyanceMedium.com">

  <!-- Liens canoniques et icônes -->
  <link rel="canonical" href="https://clairvoyancemedium.github.io/Rituel-desenvoutement-et-protection-rapide.github.io/">
  <link rel="icon" href="https://clairvoyancemedium.github.io/favicon_optimized.png" type="image/png" sizes="16x16 32x32 48x48 64x64 128x128" crossorigin="anonymous">
  <link rel="apple-touch-icon" sizes="180x180" href="https://clairvoyancemedium.github.io/favicon_optimized.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#000000">

  <!-- Préconnexion et préchargement pour performances -->
  <link rel="dns-prefetch" href="https://i.imgur.com">
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" onload="this.rel='stylesheet'">
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Ephesis&display=swap" onload="this.rel='stylesheet'">
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;1,400&family=Ephesis&display=swap" rel="stylesheet">
  </noscript>
  <link rel="preload" as="image" href="https://i.imgur.com/GmyGlKk.webp" fetchpriority="high" type="image/webp">
  <link rel="preload" as="image" href="https://i.imgur.com/KBYqPcf.webp" fetchpriority="high" type="image/webp">
  <link rel="preload" as="font" href="https://clairvoyancemedium.github.io/Consultation_de_voyance_par_email_pas_chere.github.io/Cinzel-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="https://clairvoyancemedium.github.io/Consultation_de_voyance_par_email_pas_chere.github.io/PlayfairDisplay-Regular.woff2" type="font/woff2" crossorigin="anonymous">

  <!-- Styles critiques inline pour performances -->
  <style>
    @font-face {
      font-family: 'Cinzel';
      src: url('https://clairvoyancemedium.github.io/Consultation_de_voyance_par_email_pas_chere.github.io/Cinzel-Regular.woff2') format('woff2');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Playfair Display';
      src: url('https://clairvoyancemedium.github.io/Consultation_de_voyance_par_email_pas_chere.github.io/PlayfairDisplay-Regular.woff2') format('woff2');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    :root {
      --bg: #000;
      --text: #fff;
      --accent: #87CEEB;
      --button-bg: linear-gradient(145deg, #FFB6C1, #FF69B4);
      --button-txt: #fff;
      --gold: #FFD700;
      --shadow: rgba(255, 215, 0, .7);
    }
    body {
      font-family: 'Cinzel', serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      text-align: center;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      touch-action: manipulation;
    }
    header {
      padding: 2rem 0;
      background: #111;
      position: relative;
      box-shadow: 0 4px 10px rgba(0, 0, 0, .8);
    }
    h1 {
      font-size: 2.2rem;
      font-weight: 400;
      color: #fff;
      margin: 0;
      padding: 0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    h2, h3, h4, h5, h6 {
      color: #BBAE98;
      text-shadow: 0 0 3px var(--shadow);
      font-weight: 400;
    }
    h2 {
      font-size: 1.8rem;
      margin-top: 1.2rem;
    }
    h3 {
      font-size: 1.4rem;
      margin-top: 1rem;
    }
    .cta-button {
      display: inline-block;
      padding: 0.8rem 1.2rem;
      font-size: 1.2rem;
      color: var(--button-txt);
      background: var(--button-bg);
      text-decoration: none;
      border-radius: 5px;
      transition: transform .3s ease, opacity .3s ease, box-shadow .3s ease;
      margin: 0.5rem 0;
      box-shadow: 0 4px 12px rgba(255, 105, 180, .5);
      touch-action: manipulation;
    }
    .cta-button:hover {
      transform: scale(1.05);
      opacity: .95;
      box-shadow: 0 6px 15px rgba(255, 105, 180, .7);
    }
    footer {
      margin-top: 2rem;
      font-size: .9rem;
      color: #aaa;
      padding-bottom: 1rem;
      background: #111;
    }
    footer a {
      color: inherit;
      text-decoration: none;
      transition: color .3s ease;
    }
    footer a:hover {
      color: var(--gold);
    }
    main {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
      padding: 1rem;
    }
    p, blockquote {
      max-width: 60ch;
      margin: 0 auto 1rem auto;
      line-height: 1.6;
      text-align: justify;
    }
    blockquote {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      font-size: 1.1rem;
      color: #fff;
      padding: 1rem;
    }
    .avis {
      margin: 1rem auto;
    }
    .logo {
      width: min(85vw, 450px);
      max-height: 150px;
      object-fit: contain;
      display: block;
      margin: 0 auto;
    }
    .playfair-display {
      font-family: 'Playfair Display', serif;
      font-style: italic;
      line-height: 1.8;
      font-size: 1.2rem;
      color: #fff;
      text-align: justify;
      margin: 1.5rem 0;
    }
    .cta-buttons-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 2rem;
    }
    .prix {
      margin: 0.5rem;
    }
    .scintillant {
      display: inline-block;
      color: var(--gold);
      font-weight: 700;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .8), transparent);
      background-size: 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: etoiles 4s ease-in-out infinite;
      margin-top: 2rem;
    }
    @keyframes etoiles {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    @media (max-width: 1024px) {
      body { font-size: 16px; }
      h1 { font-size: 2rem; }
      .cta-button { font-size: 1em; padding: 0.5rem 1rem; }
    }
    @media (max-width: 768px) {
      body { font-size: 14px; }
      h1 { font-size: 1.8rem; }
      .logo { width: 90%; }
      main { padding: 0.5rem; }
      .cta-buttons-container { flex-direction: column; gap: 0.8rem; }
    }
    .top-rank {
      text-align: center;
      margin-top: 1rem;
    }
    .number-one {
      font-size: 1.8rem;
      font-weight: 700;
      color: #BBD2E1;
      text-shadow: 2px 2px 5px var(--shadow);
      display: block;
    }
    .thank-you {
      font-size: 2.5rem;
      font-family: 'Ephesis', cursive;
      color: #ffb6c1;
      text-shadow: 3px 3px 6px rgba(255, 182, 193, .6);
      display: block;
      margin-top: 0.5rem;
      transform: rotate(-2deg);
    }
    .favorite-button {
      background: none;
      border: none;
      outline: none;
      cursor: pointer;
      padding: 0.5rem;
    }
    .content-container {
      text-align: left;
      max-width: 800px;
      margin: 0 auto;
    }
    .content-container ul, .content-container ol {
      padding-left: 20px;
    }
    .content-container li {
      margin-bottom: 8px;
    }
    .cta-container {
      text-align: left;
      margin-top: 20px;
    }
    .carousel {
      max-width: 800px;
      margin: 0 auto;
      overflow: hidden;
    }
    .carousel blockquote {
      display: none;
    }
    .carousel blockquote.active {
      display: block;
    }
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }
    section {
      opacity: 0;
      transition: opacity 0.5s ease-in;
    }
    section.visible {
      opacity: 1;
    }
  </style>

  <!-- Scripts de tracking optimisés -->
  <script defer src="https://www.googletagmanager.com/gtag/js?id=G-2RSFE6WL4M"></script>
  <script nonce="xai-48273">
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    document.addEventListener("DOMContentLoaded", () => {
      gtag('js', new Date());
      gtag('config', 'G-2RSFE6WL4M', {
        page_path: window.location.pathname,
        anonymize_ip: true,
        send_page_view: false
      });
    });
  </script>

  <!-- Données structurées pour SEO et assistants vocaux -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "name": "Navigation Rituel Désenvoûtement et Protection Rapide",
      "description": "Parcours de navigation pour le rituel de désenvoûtement et protection rapide numéro 1 par Frederick.",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Accueil - ClairvoyanceMedium",
          "item": "https://clairvoyancemedium.github.io/",
          "image": "https://i.imgur.com/GmyGlKk.webp",
          "description": "Point d’entrée du site leader en désenvoûtement spirituel."
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Rituel Désenvoûtement et Protection Rapide",
          "item": "https://clairvoyancemedium.github.io/Rituel-desenvoutement-et-protection-rapide.github.io/",
          "image": "https://i.imgur.com/KBYqPcf.webp",
          "description": "Service de désenvoûtement à distance le plus puissant au monde."
        }
      ]
    }
  </script>

  <!-- FAQ structurée pour SEO vocal -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Comment savoir si je suis sous un envoûtement maléfique ?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Les signes spirituels incluent une fatigue chronique qui épuise l’âme, des cauchemars récurrents hantant vos nuits, une malchance persistante bloquant votre destinée, et une oppression invisible pesant sur votre esprit. Frederick révèle ces ombres."
          }
        },
        {
          "@type": "Question",
          "name": "Quels sont les symptômes d’un sortilège à distance ?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Des douleurs soudaines sans cause, une anxiété mystique, ou des échecs constants sont des échos d’un sortilège à distance. Un rituel puissant de désenvoûtement rapide les dissipe."
          }
        }
      ]
    }
  </script>
</head>
<body>
  <header>
    <picture>
      <source srcset="https://i.imgur.com/GmyGlKk.webp" type="image/webp">
      <img src="https://i.imgur.com/GmyGlKk.jpg" alt="Logo du rituel de désenvoûtement et de protection, libération spirituelle" width="720" height="720" fetchpriority="high" decoding="async" style="display: block; margin: 0 auto; width: 720px; max-width: 100%; height: auto;">
    </picture>
    <br>
    <div class="top-rank">
      <span class="number-one">Nº 1 sur le web encore en <span id="current-year"></span></span>
      <span class="thank-you">Parce que l’univers n’accorde sa lumière qu’aux âmes purifiées !</span>
    </div>
    <br><br><br>
    <h1 aria-label="Se libérer des envoûtements grâce au rituel de désenvoûtement et protection rapide">Se libérer des envoûtements grâce au rituel de désenvoûtement et de protection rapide</h1>
    <br><br>
    <div style="text-align: center; margin-top: 20px;">
      <button class="favorite-button" aria-label="Ajouter ce site à vos favoris" aria-pressed="false">
        <span class="favorite-text" style="font-family: Arial, sans-serif; font-size: 1em; color: var(--gold);">Ajouter à vos favoris ⭐</span>
        <br><br>
        <span style="color: #87CEEB; font-family: 'Cinzel', serif; text-decoration: underline; font-size: 1.2rem;">www.clairvoyancemedium.com</span>
        <br><br>
      </button>
    </div>
    <br><br><br>
    <figure style="margin: 0 auto; max-width: 1200px; text-align: center; line-height: 1.4;">
      <picture>
        <source srcset="https://i.imgur.com/KBYqPcf.webp 1200w" type="image/webp" sizes="(max-width: 768px) 100vw, 1200px">
        <img src="https://i.imgur.com/KBYqPcf.png" alt="Rituel divin : désenvoûtement et protection rapide, conçu par Frederick" width="1200" height="600" fetchpriority="high" decoding="async" style="display: block; width: 100%; height: auto; margin: 0 auto; object-fit: cover; max-width: 100%;">
      </picture>
      <figcaption style="color: #faf8f0; font-size: 1rem; margin-top: 2rem; max-width: 80%; margin-left: auto; margin-right: auto; line-height: 1.4;">
        <strong>Plongez dans le rituel de désenvoûtement et de protection :</strong> brisez toute énergie négative, libérez-vous des sorts malveillants et retrouvez une chance renouvelée. Vivez dans la lumière en profitant d’une paix intérieure durable, d’une harmonie spirituelle profonde et d’un bien-être au quotidien.
      </figcaption>
    </figure>
  </header>

  <main>
    <section style="margin-bottom: 2rem;" class="content-container" aria-labelledby="importance-desenvoutement">
      <h2 id="importance-desenvoutement">L’Importance Sacrée du Désenvoûtement et de la Protection</h2>
      <p>Dans l’ombre silencieuse du monde, un <strong>envoûtement maléfique</strong> peut s’abattre sur votre âme, tel un voile obscur tissant des chaînes invisibles. La <strong>fatigue chronique</strong> qui éteint votre flamme intérieure, les <strong>cauchemars récurrents</strong> qui murmurent des terreurs ancestrales, la <strong>malchance persistante</strong> qui détourne votre destinée – ces <strong>signes d’un sortilège à distance</strong> sont des appels de l’univers. Sans un <strong>rituel de désenvoûtement puissant</strong> et une <strong>protection spirituelle rapide</strong>, ces énergies maléfiques s’enracinent, éteignant la lumière de votre être.</p>
      <h3>Pourquoi les Envoûtements Menacent-ils Autant Votre Âme ?</h3>
      <p>Un <strong>sortilège à distance</strong>, tissé par des forces obscures, ou une <strong>malédiction persistante</strong> héritée des ombres du passé, peut briser vos liens sacrés, détourner vos aspirations et voiler votre esprit d’un brouillard ténébreux. Frederick du Cabinet ClairvoyanceMedium.com, maître des énergies célestes, invoque des <strong>rituels de désenvoûtement à distance efficaces</strong> pour trancher ces chaînes, offrant une <strong>purification énergétique puissante</strong> et une <strong>protection spirituelle durable</strong> qui résonnent à travers le monde.</p>
      <p>Si votre âme résonne avec ces <strong>symptômes d’un envoûtement maléfique</strong> :</p>
      <ul>
        <li><strong>Fatigue chronique</strong> qui éteint lentement votre lumière intérieure</li>
        <li><strong>Cauchemars récurrents</strong>, murmures sombres troublant vos nuits</li>
        <li><strong>Malchance persistante</strong> entravant vos pas vers la félicité</li>
        <li><strong>Sensation d’oppression</strong>, comme un voile maléfique sur votre cœur</li>
      </ul>
      <p>Votre esprit est peut-être captif d’un <strong>envoûtement puissant</strong>. Invoquez dès maintenant le <strong>rituel de désenvoûtement et protection rapide</strong> pour libérer votre âme et marcher à nouveau dans la lumière universelle.</p>
    </section>

    <div style="text-align: center; margin: 20px 0;" class="cta-container">
      <a href="https://buy.stripe.com/cN2bJ62MYg1p0qk5lE" target="_blank" rel="noopener noreferrer" class="cta-button" role="button" tabindex="0" aria-label="Commander un rituel de désenvoûtement et protection rapide" onclick="trackClick('Desenvoutement', 'Purchase', 250)">Rituel de Désenvoûtement + Protection / 250,00€ - Invoquez-le ici</a>
    </div>

    <!-- Autres sections similaires conservées mais omises ici pour brièveté -->

  </main>

  <footer>
    <a href="mailto:contact.clairvoyancemedium@gmail.com" target="_blank" rel="noopener noreferrer" onclick="trackClick('Contact Email', 'Interaction', 0)" style="display: block; margin-bottom: 0.5rem;">CONTACT</a>
    <a href="https://www.clairvoyancemedium.com/Conditions-Generales-des-Ventes-et-d-Utilisation-ccsaaaaaa.asp" target="_blank" rel="noopener noreferrer" onclick="trackClick('ConditionsGenerales', 'Interaction', 0)">
      © <span id="current-year-footer"></span> ClairVoyanceMedium.com - Tous droits réservés
    </a>
    <br>
  </footer>

  <!-- Chat amélioré intégré -->
  <style>
    #chat-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      max-height: 450px;
      display: flex;
      flex-direction: column;
      z-index: 999999;
      font-family: Arial, sans-serif;
      cursor: move;
      transition: transform 0.2s;
    }
    #chat-toggle {
      width: 60px;
      height: 60px;
      background: linear-gradient(145deg, #FFB6C1, #FF69B4);
      color: #fff;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(255, 105, 180, 0.7);
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
      outline: none;
    }
    #chat-toggle:hover {
      transform: scale(1.05);
    }
    #chat-box {
      background: #111;
      border-radius: 10px;
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      margin-top: -10px;
      border: 2px solid #FF1493;
      box-shadow: 0 0 10px #FF1493;
      transition: all 0.3s ease;
    }
    #chat-messages {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      color: #fff;
    }
    #chat-messages p {
      margin-bottom: 0.5rem;
      line-height: 1.4;
      opacity: 0;
      animation: fadeIn 0.5s forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    .bot-message {
      text-align: left;
      color: #fff;
      background: rgba(255, 255, 255, 0.05);
      padding: 0.5rem;
      border-radius: 5px;
      margin-bottom: 0.8rem;
      display: inline-block;
      max-width: 80%;
      border: 2px solid #FF69B4;
      box-shadow: 0 0 8px #FF69B4;
      transition: border 0.3s, box-shadow 0.3s;
    }
    .user-message {
      text-align: right;
      color: #ffd700;
      margin-bottom: 0.8rem;
      border: 2px solid #AED6F1;
      box-shadow: 0 0 8px #AED6F1;
      padding: 0.5rem;
      border-radius: 5px;
      display: inline-block;
      max-width: 80%;
      transition: border 0.3s, box-shadow 0.3s;
    }
    #chat-form {
      display: flex;
      border-top: 1px solid #333;
    }
    #chat-input {
      flex: 1;
      padding: 0.5rem;
      border: none;
      outline: none;
      color: #333;
      border-radius: 0 0 0 10px;
    }
    #chat-send {
      background: #87CEEB;
      border: none;
      padding: 0.5rem 1rem;
      cursor: pointer;
      color: #fff;
      font-weight: bold;
      border-radius: 0 0 10px 0;
      transition: background 0.2s;
    }
    #chat-send:hover {
      background: #5eb6d1;
    }
    #chat-box.hidden {
      display: none;
    }
    @media (max-width: 400px) {
      #chat-container {
        width: 90%;
        right: 5%;
        bottom: 5px;
      }
    }
  </style>

  <div id="chat-container">
    <button id="chat-toggle" aria-expanded="false" aria-label="Ouvrir le chat">💬</button>
    <div id="chat-box" class="hidden" role="region" aria-label="Chat IA">
      <div id="chat-messages" aria-live="polite"></div>
      <form id="chat-form" aria-label="Formulaire de saisie pour le Tchat IA">
        <input type="text" id="chat-input" placeholder="Posez votre question..." aria-label="Tapez votre message ici" autocomplete="off">
        <button type="submit" id="chat-send" aria-label="Envoyer votre question">➤</button>
      </form>
    </div>
  </div>

  <script nonce="xai-48273">
    // Tracking optimisé
    function trackClick(label, category = 'Chat', value = null) {
      console.log("Tracking:", label, category, value);
    }

    // Base de connaissances (simplifiée pour brièveté)
    const knowledgeBase = [
      { question: "fatigue", answer: "Une fatigue incessante peut être le signe d’un envoûtement. Pensez à un rituel de désenvoûtement pour purifier votre énergie." },
      { question: "cauchemars", answer: "Des cauchemars récurrents peuvent être dus à des influences négatives. Un désenvoûtement pourrait ramener la paix dans vos nuits." }
    ];

    let nonUnderstoodCount = 0;
    const defaultNonUnderstood = "Je ne comprends pas bien.";

    function containsUnknownWord(userMsg) {
      const words = userMsg.split(/\s+/);
      const validRegex = /^[A-Za-zÀ-ÖØ-öø-ÿ'-]+$/;
      return words.some(word => {
        const cleanWord = word.replace(/[.,?!;:()"]/g, '');
        return cleanWord && !validRegex.test(cleanWord);
      });
    }

    function levenshtein(a, b) {
      const an = a?.length || 0, bn = b?.length || 0;
      if (!an) return bn;
      if (!bn) return an;
      const matrix = Array(bn + 1).fill().map(() => Array(an + 1).fill(0));
      for (let i = 0; i <= bn; i++) matrix[i][0] = i;
      for (let j = 0; j <= an; j++) matrix[0][j] = j;
      for (let i = 1; i <= bn; i++) {
        for (let j = 1; j <= an; j++) {
          const cost = b[i - 1] === a[j - 1] ? 0 : 1;
          matrix[i][j] = Math.min(
            matrix[i - 1][j] + 1,
            matrix[i][j - 1] + 1,
            matrix[i - 1][j - 1] + cost
          );
        }
      }
      return matrix[bn][an];
    }

    function findBestMatch(userInput) {
      const lowerInput = userInput.toLowerCase();
      let bestScore = Infinity, bestAnswer = null;
      knowledgeBase.forEach(item => {
        const dist = levenshtein(lowerInput, item.question.toLowerCase());
        if (dist < bestScore) {
          bestScore = dist;
          bestAnswer = item.answer;
        }
      });
      return bestScore > 5 ? defaultNonUnderstood : bestAnswer;
    }

    function getResponse(userMsg) {
      const lowerMsg = userMsg.toLowerCase().trim();
      if (lowerMsg === "bonjour") {
        nonUnderstoodCount = 0;
        return "Je suis à votre écoute.";
      } else if (lowerMsg === "merci" || lowerMsg === "merci beaucoup") {
        nonUnderstoodCount = 0;
        return "Je vous en prie.";
      } else if (["au revoir", "aurevoir", "à bientôt", "bye"].includes(lowerMsg)) {
        nonUnderstoodCount = 0;
        return "À bientôt et sachez que notre aide est toujours à portée de main. Revenez quand vous le souhaitez.";
      } else {
        if (containsUnknownWord(userMsg)) {
          nonUnderstoodCount++;
          return nonUnderstoodCount < 3
            ? "Je n’ai pas saisi certains mots. Reformulez, s’il vous plaît."
            : "Nous avons du mal à nous comprendre. Un désenvoûtement (50€) pourrait rétablir l’équilibre.";
        }
        const answer = findBestMatch(userMsg);
        if (answer === defaultNonUnderstood) {
          nonUnderstoodCount++;
          return nonUnderstoodCount < 3
            ? "Je n’ai pas saisi votre question. Reformulez, s’il vous plaît."
            : "Il semble que nous ayons du mal à nous comprendre. Un désenvoûtement (50€) pourrait aider.";
        }
        nonUnderstoodCount = 0;
        return answer;
      }
    }

    function simulateTyping(callback) {
      const typingMessage = document.createElement("p");
      typingMessage.className = "bot-message";
      typingMessage.textContent = "...";
      chatMessages.appendChild(typingMessage);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      setTimeout(() => {
        chatMessages.removeChild(typingMessage);
        callback();
      }, 800);
    }

    function addMessage(txt, cls) {
      const p = document.createElement("p");
      p.className = cls;
      p.textContent = txt;
      chatMessages.appendChild(p);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    let isDragging = false, currentX, currentY, initialX, initialY;
    const chatContainer = document.getElementById("chat-container");
    const chatToggle = document.getElementById("chat-toggle");
    const chatBox = document.getElementById("chat-box");
    const chatMessages = document.getElementById("chat-messages");
    const chatForm = document.getElementById("chat-form");
    const chatInput = document.getElementById("chat-input");

    chatContainer.addEventListener("mousedown", startDragging);
    chatContainer.addEventListener("touchstart", startDragging, { passive: false });

    function startDragging(e) {
      isDragging = true;
      if (e.type === "mousedown") {
        initialX = e.clientX - (currentX || 0);
        initialY = e.clientY - (currentY || 0);
      } else {
        initialX = e.touches[0].clientX - (currentX || 0);
        initialY = e.touches[0].clientY - (currentY || 0);
      }
      document.addEventListener("mousemove", drag);
      document.addEventListener("touchmove", drag, { passive: false });
      document.addEventListener("mouseup", stopDragging);
      document.addEventListener("touchend", stopDragging);
    }

    function drag(e) {
      if (!isDragging) return;
      e.preventDefault();
      if (e.type === "mousemove") {
        currentX = e.clientX - initialX;
        currentY = e.clientY - initialY;
      } else {
        currentX = e.touches[0].clientX - initialX;
        currentY = e.touches[0].clientY - initialY;
      }
      chatContainer.style.right = "auto";
      chatContainer.style.bottom = "auto";
      chatContainer.style.left = `${currentX}px`;
      chatContainer.style.top = `${currentY}px`;
    }

    function stopDragging() {
      isDragging = false;
      document.removeEventListener("mousemove", drag);
      document.removeEventListener("touchmove", drag);
      document.removeEventListener("mouseup", stopDragging);
      document.removeEventListener("touchend", stopDragging);
    }

    currentX = window.innerWidth - chatContainer.offsetWidth - 20;
    currentY = window.innerHeight - chatContainer.offsetHeight - 20;
    chatContainer.style.left = `${currentX}px`;
    chatContainer.style.top = `${currentY}px`;

    chatToggle.addEventListener("click", () => {
      const isHidden = chatBox.classList.contains("hidden");
      chatBox.classList.toggle("hidden");
      chatToggle.setAttribute("aria-expanded", isHidden ? "true" : "false");
      if (isHidden) {
        trackClick("ChatOpen", "Interaction", 0);
        if (!chatMessages.children.length) {
          addMessage("Bonjour, que puis-je pour vous ?", "bot-message");
        }
        setTimeout(() => chatInput.focus(), 300);
      } else {
        trackClick("ChatClose", "Interaction", 0);
      }
    });

    chatForm.addEventListener("submit", e => {
      e.preventDefault();
      const userMsg = chatInput.value.trim();
      if (!userMsg) return;
      addMessage(userMsg, "user-message");
      trackClick("ChatMessage", "Interaction", 0);
      chatInput.value = "";
      simulateTyping(() => {
        const answer = getResponse(userMsg);
        addMessage(answer, "bot-message");
      });
    });
  </script>

  <!-- Scripts finaux pour interactions -->
  <script nonce="xai-48273">
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll("#current-year, #current-year-footer").forEach(e => e.textContent = new Date().getFullYear());
      const addToFavorites = e => {
        const t = e.querySelector(".favorite-text");
        t.innerHTML = "⭐ Ajouté !";
        t.style.color = "#FFD700";
        e.setAttribute("aria-pressed", "true");
        navigator.userAgent.match(/iPhone|iPad|iPod/i)
          ? alert("Partagez > Ajouter à l’écran d’accueil")
          : navigator.userAgent.match(/Android/i)
          ? alert("Menu (⋮) > Ajouter à l’écran d’accueil")
          : alert("Ctrl + D ou Cmd + D");
        trackClick("Ajout Favoris", "Interaction", 0);
      };
      document.querySelectorAll(".favorite-button").forEach(e => e.addEventListener("click", () => addToFavorites(e)));
      const quotes = document.querySelectorAll(".carousel blockquote");
      let idx = 0;
      quotes[0]?.classList.add("active");
      setInterval(() => {
        quotes.forEach(q => q.classList.remove("active"));
        quotes[idx]?.classList.add("active");
        idx = (idx + 1) % quotes.length;
      }, 4000);
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      document.querySelectorAll("section").forEach(section => observer.observe(section));
    });
  </script>
</body>
</html>
